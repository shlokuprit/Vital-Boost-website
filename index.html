<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VitalBoost - Discover The Morning Ritual</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-image: url('Background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        #thankYouMessage {
            display: none;
            color: #ffcc00;
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div
        style="max-width: 500px; margin: 80px auto; background:rgba(34, 34, 34, 0.9); padding:30px; border-radius:6px; text-align:center; color:white;">

        <h2 style="color:white; font-size:22px; line-height:1.5;">
            "FACT: Below You'll Find The Secret To The<span style="color:red;"> New 'MITO-MELT' </span>Method..."
        </h2>

        <p style="color:#bbb; margin:20px 0 10px;">Enter Your Email to Discover The Secret:</p>

        <form id="lead-form">
            <input type="email" id="email-input" name="email" placeholder="Enter Your Email Address.." required
                style="width:90%; padding:12px; border:none; border-radius:4px; margin-bottom:15px; font-size:14px;">

            <button type="submit" id="submit-button"
                style="width:90%; padding:14px; background:#ffcc00; color:black; font-weight:bold; font-size:16px; border:none; border-radius:4px; cursor:pointer;">
                SHOW ME THE SECRET
            </button>
        </form>

        <div id="thankYouMessage">Thank you! Redirecting now...</div>

        <p style="font-size:12px; color:#aaa; margin-top:15px;">** You Will Never Get Spam - We Protect Your Privacy</p>
    </div>

    <footer style="text-align:center; margin-top:30px; color:white; font-size:14px;">
        <p>Copyright Â© 2025 - VitalBoost</p>
        <p><a href="/privacy.html" style="color:white; text-decoration:none;">Privacy Policy</a> -
            <a href="/disclaimer.html" style="color:white; text-decoration:none;">Disclaimer</a>
        </p>
    </footer>

    <script>
        // --- CONFIGURATION ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzKlMxjW78iq65zW6kK79pjBdwK2vkr2QwOaUjTxYMcb46Ub3TR9_s-5ub0lnZcGgL2_Q/exec';

        const AFFILIATE_URL = 'https://adc1a2wft7ukyk69rmp73l5nfv.hop.clickbank.net/?hop=fitshlok';

        // --- APPLICATION CODE ---
        const form = document.getElementById('lead-form');
        const submitButton = document.getElementById('submit-button');
        const thankYouMessage = document.getElementById('thankYouMessage');

        // 1. Get the promoter's ID from the page URL
        const urlParams = new URLSearchParams(window.location.search);
        const promoterId = urlParams.get('ref'); // Looks for "?ref=PROMOTER_ID"

        form.addEventListener('submit', e => {
            e.preventDefault();

            submitButton.disabled = true;
            submitButton.innerText = 'SUBMITTING...';

            // 2. Create the data payload to send to Google Sheets
            const formData = new FormData(form);
            formData.append('promoter', promoterId); // Add the promoter ID to the form data

            // 3. Send the data to your Google Apps Script
            fetch(SCRIPT_URL, { method: 'POST', body: formData })
                .then(response => response.json())
                .then(data => {
                    if (data.result === 'success') {
                        console.log('Success!');
                        submitButton.innerText = 'SUCCESS!';
                        thankYouMessage.style.display = 'block';

                        // 4. Build the final affiliate URL with the tracking ID
                        const finalRedirectURL = AFFILIATE_URL + '&tid=' + (promoterId || 'direct');

                        // 5. Wait 2 seconds, then redirect the user
                        setTimeout(() => {
                            window.location.href = finalRedirectURL;
                        }, 2000);
                    } else {
                        throw new Error('Submission failed');
                    }
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    submitButton.disabled = false;
                    submitButton.innerText = 'SHOW ME THE SECRET';
                    alert('Error! Could not submit form. Please try again.');
                });
        });
    </script>

</body>

</html>